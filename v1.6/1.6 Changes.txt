Fixed concurrency issues and threads not ending within the AI